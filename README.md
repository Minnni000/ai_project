# ğŸ³ AI Recipe Project - æ™ºæ…§é£Ÿè­œåˆ†æç³»çµ±

ä¸€å€‹åŸºæ–¼æ©Ÿå™¨å­¸ç¿’çš„é£Ÿè­œè³‡æ–™è™•ç†èˆ‡åˆ†æç³»çµ±ï¼Œæä¾›é£Ÿè­œçˆ¬å–ã€è³‡æ–™æ¸…ç†ã€å‘é‡åŒ–åˆ†æã€ç›¸ä¼¼åº¦æ¯”å°ç­‰åŠŸèƒ½ã€‚

## ğŸ“‹ ç›®éŒ„çµæ§‹

```
ai_project/
â”œâ”€â”€ cleaned_csv/           # æ¸…ç†å¾Œçš„é£Ÿè­œè³‡æ–™
â”‚   â”œâ”€â”€ å°ç™½èœ/
â”‚   â”œâ”€â”€ ä¹å±¤å¡”/
â”‚   â”œâ”€â”€ ç‰›ç•ªèŒ„/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ database/             # çµæ§‹åŒ–è³‡æ–™åº«
â”‚   â”œâ”€â”€ extracted_ingredients.csv
â”‚   â”œâ”€â”€ ingredient_database.csv
â”‚   â””â”€â”€ main_recipe_database.csv
â”œâ”€â”€ image/               # é£Ÿè­œåœ–ç‰‡
â”‚   â”œâ”€â”€ all_pic/        # çµ±ä¸€å‘½åçš„åœ–ç‰‡
â”‚   â”œâ”€â”€ å°ç™½èœ/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ raw_csv/            # åŸå§‹çˆ¬å–è³‡æ–™
â”œâ”€â”€ scripts/            # æ ¸å¿ƒè™•ç†è…³æœ¬
â””â”€â”€ models/             # è¨“ç·´æ¨¡å‹å­˜æ”¾
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒéœ€æ±‚
```bash
pip install pandas numpy scikit-learn beautifulsoup4 requests
```

### å®Œæ•´æµæ°´ç·šåŸ·è¡Œ
```bash
# åŸ·è¡Œå®Œæ•´è™•ç†æµç¨‹
python scripts/run_pipeline.py

# æŒ‡å®šè”¬èœåç¨±
python scripts/run_pipeline.py å°ç™½èœ

# å¾ç‰¹å®šæ­¥é©Ÿé–‹å§‹
python scripts/run_pipeline.py --start-from clean
```

## ğŸ› ï¸ æ ¸å¿ƒåŠŸèƒ½

### 1. è³‡æ–™çˆ¬å–
- **è…³æœ¬**: `crawl_icook_recipes.py`
- **åŠŸèƒ½**: å¾ iCook ç¶²ç«™çˆ¬å–é£Ÿè­œè³‡æ–™
- **è¼¸å‡º**: `raw_csv/{è”¬èœå}_é£Ÿè­œè³‡æ–™.csv`

```bash
python scripts/crawl_icook_recipes.py å°ç™½èœ
```

### 2. è³‡æ–™æ¸…ç†
- **è…³æœ¬**: `clean_recipe_csv_0720.py`
- **åŠŸèƒ½**: æ¸…ç†é£Ÿææ ¼å¼ã€è§£æçµæ§‹åŒ–è³‡æ–™
- **è¼¸å‡º**: `cleaned_csv/{è”¬èœå}/{è”¬èœå}_æ¸…ç†å¾Œé£Ÿè­œ.json`

```bash
python scripts/clean_recipe_csv_0720.py --all
```

### 3. å‘é‡åŒ–è™•ç†
- **è…³æœ¬**: `generate_documents.py`
- **åŠŸèƒ½**: ç”Ÿæˆ TF-IDF å‘é‡åŒ–æ–‡ä»¶
- **è¼¸å‡º**: `cleaned_csv/{è”¬èœå}/recipe_documents.csv`

```bash
python scripts/generate_documents.py --all
```

### 4. ç›¸ä¼¼åº¦åˆ†æ
- **è…³æœ¬**: `check_duplicates.py`
- **åŠŸèƒ½**: åˆ†æé£Ÿè­œç›¸ä¼¼åº¦ï¼Œæ‰¾å‡ºé‡è¤‡æˆ–ç›¸ä¼¼é£Ÿè­œ
- **è¼¸å‡º**: `cleaned_csv/{è”¬èœå}/{è”¬èœå}_é£Ÿè­œç›¸ä¼¼åº¦åˆ†æ.csv`

```bash
python scripts/check_duplicates.py
```

## ğŸ“Š è³‡æ–™åº«å·¥å…·

### å»ºç«‹è³‡æ–™åº«
```bash
# å»ºç«‹ä¸»é£Ÿè­œè³‡æ–™åº«
python scripts/create_database.py

# å»ºç«‹é£Ÿæè³‡æ–™åº«
python scripts/create_database.py ingredient

# å»ºç«‹é£Ÿè­œæ­¥é©Ÿè³‡æ–™åº«
python scripts/create_database.py steps
```

### é£Ÿææå–
```bash
# å¾ JSON æª”æ¡ˆæå–é£Ÿæè³‡æ–™
python scripts/extract_ingredients_from_json.py
```

## ğŸ–¼ï¸ åœ–ç‰‡è™•ç†

### çµ±ä¸€åœ–ç‰‡å‘½å
```bash
# å°‡æ‰€æœ‰åœ–ç‰‡é‡æ–°å‘½åç‚º ID.jpg æ ¼å¼ä¸¦è¤‡è£½åˆ° all_pic è³‡æ–™å¤¾
python scripts/pic_id.py
```

## ğŸ—‘ï¸ è³‡æ–™ç®¡ç†

### åˆªé™¤é£Ÿè­œ
1. åœ¨ `scripts/delete_list.txt` ä¸­åˆ—å‡ºè¦åˆªé™¤çš„é£Ÿè­œ ID
2. åŸ·è¡Œåˆªé™¤è…³æœ¬ï¼š
```bash
python scripts/delete_recipe.py
```

## ğŸ“ˆ åˆ†æçµæœ

### ç›¸ä¼¼åº¦åˆ†æå ±å‘Š
æ¯å€‹è”¬èœè³‡æ–™å¤¾æœƒç”Ÿæˆç›¸ä¼¼åº¦åˆ†æå ±å‘Šï¼ŒåŒ…å«ï¼š
- æœ€é«˜ç›¸ä¼¼åº¦çµ±è¨ˆ
- å»ºè­°é–€æª»å€¼
- ç›¸ä¼¼é£Ÿè­œé…å°æ¸…å–®
- ä¸åŒé–€æª»ä¸‹çš„çµ±è¨ˆæ•¸æ“š

### è³‡æ–™åº«è¼¸å‡º
- **ä¸»é£Ÿè­œè³‡æ–™åº«**: åŒ…å«åŸºæœ¬é£Ÿè­œè³‡è¨Š
- **é£Ÿæè³‡æ–™åº«**: è©³ç´°é£Ÿææ¸…å–®èˆ‡ç”¨é‡
- **é£Ÿè­œæ­¥é©Ÿè³‡æ–™åº«**: å®Œæ•´è£½ä½œæ­¥é©Ÿ

## ğŸ”§ é€²éšåŠŸèƒ½

### è‡ªè¨‚è™•ç†
- ä¿®æ”¹ `clean_recipe_csv_0720.py` ä¸­çš„æ¸…ç†è¦å‰‡
- èª¿æ•´ `check_duplicates.py` ä¸­çš„ç›¸ä¼¼åº¦é–€æª»
- æ“´å±• `crawl_icook_recipes.py` æ”¯æ´æ›´å¤šç¶²ç«™

### æ¨¡å‹è¨“ç·´
- TF-IDF å‘é‡åŒ–æ¨¡å‹
- é£Ÿè­œåˆ†é¡æ¨¡å‹
- ç›¸ä¼¼åº¦è¨ˆç®—æ¨¡å‹

## ğŸ“ è³‡æ–™æ ¼å¼

### åŸå§‹è³‡æ–™ (raw_csv)
```csv
id,é£Ÿè­œåç¨±,ç¶²å€,é è¦½é£Ÿæ,è©³ç´°é£Ÿæ,åšæ³•,åœ–ç‰‡ç›¸å°è·¯å¾‘
```

### æ¸…ç†å¾Œè³‡æ–™ (JSON)
```json
{
  "id": "479305",
  "name": "å¤§è’œæ²¹",
  "url": "https://icook.tw/recipes/479305",
  "preview_ingredients": "å»çš®å¤§è’œã€æ²™æ‹‰æ²¹ã€é£Ÿé¹½",
  "ingredients": ["å»çš®å¤§è’œ100g", "æ²™æ‹‰æ²¹150g"],
  "structured_ingredients": [
    {"name": "å»çš®å¤§è’œ", "quantity": 100.0, "unit": "g"}
  ],
  "steps": ["æ­¥é©Ÿ1", "æ­¥é©Ÿ2"],
  "image_path": "è’œé ­/479305.jpg"
}
```

